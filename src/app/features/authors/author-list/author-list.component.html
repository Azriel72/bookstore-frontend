<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Authors</h1>
        <button class="btn btn-primary" routerLink="/authors/new">Add New Author</button>
    </div>

    @if(error) {
        <app-alert type="danger" [message]="error"></app-alert>
    }

    @if(loading) {
        <div>
        <app-loading-spinner></app-loading-spinner>
    </div>
    }

    @if(!loading && authors.length === 0) {
        <div>
            No authors found. Click "Add New Author" to create one.
        </div>
    }

    @if(!loading && authors.length > 0) {
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Books Published</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let author of authors">
                        <td>{{ author.id }}</td>
                        <td>{{ author.firstName }} {{ author.lastName }}</td>
                        <td>{{ author.bookCount || 0 }}</td>
                        <td>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-outline-primary" (click)="editAuthor(author.id)">Edit</button>
                                <button class="btn btn-sm btn-outline-danger"
                                    (click)="deleteAuthor(author.id)">Delete</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    }
</div>